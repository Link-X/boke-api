{"version":3,"sources":["webpack:///./src/utils/index.ts","webpack:///./src/utils/verify.ts","webpack:///./src/pages/edit-article/utils.ts","webpack:///./src/common/article/code-style.tsx","webpack:///./src/pages/edit-article/components/edit-header.tsx","webpack:///./src/pages/edit-article/default.ts","webpack:///./src/utils/type-of.ts","webpack:///./src/pages/article/components/list.tsx","webpack:///./src/pages/article/index.tsx","webpack:///./src/pages/article/childrens/details/index.tsx","webpack:///./src/pages/article-details/index.tsx","webpack:///./src/pages/edit-article/components/code-mirror-editor.tsx","webpack:///./src/pages/edit-article/components/tip.tsx","webpack:///./src/pages/article/components/side.tsx","webpack:///./src/pages/edit-article/index.tsx","webpack:///./src/common/article/headering-block.tsx"],"names":["func","wait","timeout","context","this","args","arguments","clearTimeout","setTimeout","apply","getQueryString","name","reg","RegExp","r","window","location","search","substr","match","unescape","getCookie","arr","document","cookie","assignTime","timerId","startTime","Date","arg","nowTime","timesData","dateBegin","dateDiff","getTime","dayDiff","Math","floor","leave1","hours","leave2","minutes","timesString","paramsObj","url","key","href","paramsarr","returnjson","forEach","data","splitdata","split","sp0","sp1","inputTime","date","y","getFullYear","m","getMonth","d","getDate","h","getHours","minute","getMinutes","second","getSeconds","getImgSize","base64url","str","replace","strLength","length","fileLength","parseInt","String","size","toFixed","compressImage","base64","image","Image","compressBase64","src","Promise","resolve","reject","onload","width","height","canvas","createElement","ctx","getContext","drawImage","toDataURL","compressionImg","e","file","target","files","type","indexOf","reader","FileReader","readAsDataURL","onloadend","fileMaxSize","result","Error","rules","$init","JSON","parse","stringify","status","cb","message","obj","val","getType","toLocaleLowerCase","typeOfS","min","max","len","getTypeLen","isObject","Object","keys","v","judge","isFunc","validator","ruleCallBack","required","verifyTop","verifyBottom","iterator","rule","verifyFunc","Verify","formData","console","log","title","markdown","tagId","validate","React","require","hljs","languageData","sql","htmlbars","css","javascript","xml","stylus","json","registerLanguage","CodeStyle","props","setRef","bind","el","codeEl","highlightCode","highlightBlock","ref","className","language","value","PureComponent","defaultProps","form","tagData","uploadInput","onChange","uploadImg","accept","defaultValue","setInp","placeholder","style","marginRight","display","alignItems","Popover","placement","content","articleImg","onClick","removeImg","clickFile","trigger","xmlns","xmlnsXlink","viewBox","version","id","stroke","strokeWidth","fill","fillRule","transform","map","selectTag","checkouted","tag","Button","submit","isArray","prototype","toString","call","isNumber","isString","isBoolean","isDate","verifyDate","getLen","getObjLen","getNumLen","constructor","toLowerCase","array","object","number","string","boolean","articleList","i","show","hot","goDetails","backgroundImage","getArticleDate","createDate","preventDefault","stopPropagation","filterTag","navList","find","userName","useState","setNavList","setArticleList","activedTag","setActivedTag","filterVal","steFilterVal","getTagsFunc","getTags","res","setListItem","list","major","major2","getArticleFunc","getArticle","page","pageSize","sort","random","getData","filterfList","contentIsInCludes","includes","toLocaleUpperCase","isActived","item","tagFillter","useEffect","router","changeVal","debounce","history","push","some","confirm","Modal","TextArea","Input","pinglunList","details","setDetails","commentsVal","setCommentsVal","goTop","setGoTop","getUrlParam","routerParams","areaRef","useRef","init","error","getArticleDetails","editArticle","delTip","text","okType","cancelText","okText","onOk","onCancel","loverArticle","loveArticle","userLoveStatus","loveLen","Number","submitPingLun","warning","addCommentArticle","articleId","success","sc","throttle","documentElement","scrollTop","addEventListener","removeEventListener","userImage","formatDateTime","articleReadCountLen","isEdit","delArticleRequest","skipHtml","renderers","code","heading","HeadingBlock","source","current","focus","autosize","minRows","maxRows","marginTop","scrollTo","IS_MOBILE","navigator","userAgent","state","isControlled","Boolean","handleChange","editorRef","createRef","forceTextArea","editor","CodeMirror","fromTextArea","keyMap","mode","theme","gitHubSpice","taskLists","strikethrough","emoji","lineWrapping","autoRefresh","indentUnit","tabSize","coder","extraKeys","Ctrl","on","editOnScroll","getValue","setValue","doc","setCursor","lineCount","readOnly","textAreaClassName","Component","preview","centerUploadImg","centerInput","Tooltip","activedPreview","setVal","event","getAttribute","prefix","SearchOutlined","color","tag-id","useSetState","markdownText","undefined","setState","codeMirror","previewBox","setStatForm","upload","imgBase64","uploadImage","path","overEnter","httpPost","editArticleDetials","addArticle","VisitorFormVerify","getNav","getDetails","click","boxHeight","getBoundingClientRect","scale","querySelector","elements","h1","h2","h3","h4","h5","h6","Heading","level","children","nodeValue","Fragment","renderHtml"],"mappings":"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","file":"article.1e251c1e1666a2075497.chunk.js","sourcesContent":["export const getQueryString = (name: string): null | string => {\r\n    const reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i')\r\n    const r = window.location.search.substr(1).match(reg)\r\n    if (r !== null) {\r\n        return unescape(r[2])\r\n    }\r\n    return null\r\n}\r\n\r\nexport const getCookie = (name: string): string => {\r\n    var arr = document.cookie.match(new RegExp('(^| )' + name + '=([^;]*)(;|$)'))\r\n    if (arr != null) {\r\n        return unescape(arr[2])\r\n    }\r\n    return ''\r\n}\r\n\r\nexport const getToken = (): string => {\r\n    return getQueryString('token') || getCookie('token')\r\n}\r\n\r\nexport const throttle = (func: Function, wait: number, assignTime: number): Function => {\r\n    let timerId: any = ''\r\n    let startTime: any = new Date()\r\n    return (...arg: any[]): void => {\r\n        const nowTime: any = new Date()\r\n        clearTimeout(timerId)\r\n        if (nowTime - startTime < assignTime) {\r\n            timerId = setTimeout(() => {\r\n                func(arg[0])\r\n            }, wait)\r\n            return\r\n        }\r\n        func(arg[0])\r\n        startTime = nowTime\r\n    }\r\n}\r\n\r\nexport function debounce(func: Function, wait: number) {\r\n    let timeout: any = null\r\n    const context = this\r\n    return function() {\r\n        var args = arguments\r\n        if (timeout) clearTimeout(timeout)\r\n        timeout = setTimeout(function() {\r\n            func.apply(context, args)\r\n        }, wait)\r\n    }\r\n}\r\n\r\n/** 计算一个时间与当前时间的差 */\r\nexport const getArticleDate = (timesData: string) => {\r\n    const dateBegin = new Date(timesData)\r\n    const dateEnd = new Date()\r\n    const dateDiff = dateEnd.getTime() - dateBegin.getTime() // 时间差的毫秒数\r\n    const dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000)) // 计算出相差天数\r\n    const leave1 = dateDiff % (24 * 3600 * 1000) // 计算天数后剩余的毫秒数\r\n    const hours = Math.floor(leave1 / (3600 * 1000)) // 计算出小时数\r\n    // 计算相差分钟数\r\n    const leave2 = leave1 % (3600 * 1000) // 计算小时数后剩余的毫秒数\r\n    const minutes = Math.floor(leave2 / (60 * 1000)) // 计算相差分钟数\r\n    // 计算相差秒数\r\n    // const leave3 = leave2 % (60 * 1000) // 计算分钟数后剩余的毫秒数\r\n    // const seconds = Math.round(leave3 / 1000)\r\n    let timesString = ''\r\n\r\n    if (dayDiff !== 0) {\r\n        timesString = `${dayDiff}天前`\r\n    } else if (dayDiff === 0 && hours !== 0) {\r\n        timesString = `${hours}小时前`\r\n    } else if (dayDiff === 0 && hours === 0) {\r\n        timesString = `${minutes}分钟前`\r\n    }\r\n\r\n    return timesString\r\n}\r\n\r\ninterface getUrlParamsType {\r\n    url: string\r\n    key: string\r\n}\r\nexport const getUrlParam = <T extends object>(paramsObj?: getUrlParamsType): T => {\r\n    let { url, key } = paramsObj || {}\r\n    if (!url) {\r\n        url = window && window.location && window.location.href\r\n    }\r\n    if (!url) {\r\n        return {} as T\r\n    }\r\n    const urlformat = url\r\n    const re = /[^?#&]+=[^?#&]+/g\r\n    const paramsarr = urlformat.match(re) || []\r\n    const returnjson: any = {}\r\n    paramsarr.forEach((data) => {\r\n        const splitdata = data.split('=')\r\n        const sp0 = splitdata && splitdata[0]\r\n        const sp1 = splitdata && splitdata[1]\r\n        if (sp0) {\r\n            returnjson[sp0] = sp1\r\n        }\r\n    })\r\n    if (key) {\r\n        return (returnjson && returnjson[key]) || ''\r\n    } else {\r\n        return returnjson\r\n    }\r\n}\r\n\r\nexport const formatDateTime = (inputTime: string): string => {\r\n    const date = new Date(inputTime)\r\n    const y = date.getFullYear()\r\n    let m: any = date.getMonth() + 1\r\n    m = m < 10 ? `0${m}${m}` : m\r\n    let d: any = date.getDate()\r\n    d = d < 10 ? `0${d}` : d\r\n    let h: any = date.getHours()\r\n    h = h < 10 ? `0${h}` : h\r\n    let minute: any = date.getMinutes()\r\n    let second: any = date.getSeconds()\r\n    minute = minute < 10 ? `0${minute}` : minute\r\n    second = second < 10 ? `0${second}` : second\r\n    return `${y}-${m}-${d} ${h}:${minute}:${second}`\r\n}\r\n\r\nconst getImgSize = (base64url: string = ''): number => {\r\n    // 获取图片base64大小\r\n    const str = base64url.replace('data:image/jpeg;base64,', '')\r\n    const strLength: number = str.length\r\n    const fileLength = parseInt(String(strLength - (strLength / 8) * 2))\r\n    let size = ''\r\n    size = (fileLength / 1024).toFixed(2)\r\n    return parseInt(size)\r\n}\r\n\r\nconst compressImage = (base64: any): Promise<string> => {\r\n    const image = new Image()\r\n    let compressBase64 = ''\r\n    image.src = base64\r\n    return new Promise((resolve, reject) => {\r\n        image.onload = function() {\r\n            const width = image.width\r\n            const height = image.height\r\n            const canvas = document.createElement('canvas')\r\n            const ctx = canvas.getContext('2d')\r\n            canvas.width = width\r\n            canvas.height = height\r\n            ctx.drawImage(image, 0, 0, width, height)\r\n            compressBase64 = canvas.toDataURL('image/jpeg', 0.6)\r\n            resolve(compressBase64)\r\n        }\r\n    })\r\n}\r\n\r\nexport const compressionImg = async (e: React.ChangeEvent<HTMLInputElement>): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n        const file = e.target.files[0]\r\n        const fileType = file.type || 'image/png'\r\n        if (fileType.indexOf('image') === -1) {\r\n            reject(new Error('文件类型错误'))\r\n            return\r\n        }\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onloadend = async (e) => {\r\n            const fileMaxSize = 5120\r\n            const base64 = await compressImage(e.target.result)\r\n            const size = getImgSize(base64) || 0\r\n            if (size > fileMaxSize) {\r\n                reject(new Error('文章图片过大'))\r\n                return\r\n            }\r\n            resolve(base64)\r\n        }\r\n    })\r\n}\r\n","/* eslint-disable */\r\nimport { objectLen, isObject, typeOfS, isFunc, getTypeLen, getType } from './type-of'\r\nexport interface statusType {\r\n    status: boolean\r\n    message: string\r\n}\r\n\r\nclass Verify {\r\n    constructor(data, rules) {\r\n        this.data = null\r\n        this.rules = {}\r\n        this.$init(data, rules)\r\n    }\r\n    $init<T>(data: T, rules) {\r\n        // 开发模式\r\n        // if (!data || !objectLen(rules)) {\r\n        //     console.error('设置的校验数据或规则错误')\r\n        //     return\r\n        // }\r\n        this.data = JSON.parse(JSON.stringify(data))\r\n        this.rules = rules\r\n    }\r\n    ruleCallBack(status: statusType): Function {\r\n        // 自定义校验\r\n        return (cb: Function) => {\r\n            status.status = !!(cb && cb.message)\r\n            status.message = cb && cb.message\r\n        }\r\n    }\r\n    verifyTop(obj: any, val: any) {\r\n        // 校验第一个规则\r\n        const type = (obj.type ? obj.type : getType(val)).toLocaleLowerCase()\r\n        const func = typeOfS[type] || (() => {})\r\n        return !(val && func(val))\r\n    }\r\n    verifyBottom(obj: any, val: any) {\r\n        // 校验第二个规则\r\n        const section = obj.min && obj.max && obj.type !== 'date'\r\n        if (!section) return false\r\n        const type = getType(val)\r\n        const len = getTypeLen[type](val)\r\n        const lenSection = len >= obj.min && len <= obj.max\r\n        return !lenSection\r\n    }\r\n    iterator(rules: any) {\r\n        if (!isObject(rules)) {\r\n            return\r\n        }\r\n        let status = {\r\n            status: false,\r\n            message: '',\r\n            key: ''\r\n        }\r\n        for (let v of Object.keys(rules)) {\r\n            const judge = { ...this.rules[v][0], ...this.rules[v][1] }\r\n            const val = this.data[v]\r\n            if (isFunc(judge.validator)) {\r\n                judge.validator(val, this.ruleCallBack(status))\r\n            } else if (judge.required) {\r\n                status.status = this.verifyTop(judge, val) || this.verifyBottom(judge, val)\r\n            } else if (!judge.required && judge.min && judge.max) {\r\n                status.status = val && this.verifyBottom(judge, val)\r\n            }\r\n            if (status.status) {\r\n                // status 为true停止校验\r\n                status.key = v\r\n                status.message = status.message ? status.message : judge.message\r\n                return status\r\n            }\r\n        }\r\n        return status\r\n    }\r\n    validate(cb) {\r\n        const status = this.iterator(this.rules)\r\n        const data = {\r\n            key: status.key,\r\n            result: status.status || status.message,\r\n            message: status.message\r\n        }\r\n        cb(data)\r\n        return data\r\n    }\r\n    addRule(rule) {}\r\n}\r\n\r\nexport default Verify\r\n","import Verify from '@/utils/verify'\r\n\r\nconst verifyFunc = new Verify({}, {})\r\nexport const VisitorFormVerify = <T>(formData: articleType.formType): Promise<T> => {\r\n    return new Promise((resolve, reject) => {\r\n        console.log(formData)\r\n        verifyFunc.$init(formData, {\r\n            title: [\r\n                {\r\n                    required: true,\r\n                    message: '请输入3-50字文章标题',\r\n                    type: 'string',\r\n                    min: 3,\r\n                    max: 50\r\n                }\r\n            ],\r\n            markdown: [\r\n                {\r\n                    required: true,\r\n                    message: '内容请最少输入60字',\r\n                    type: 'string',\r\n                    min: 60,\r\n                    max: 99999999\r\n                }\r\n            ],\r\n            tagId: [\r\n                {\r\n                    message: '请选择文章标签',\r\n                    validator: (val: number, cb: Function) => {\r\n                        console.log(val)\r\n                        if (!val && val !== 0) {\r\n                            cb(new Error('请选择文章标签'))\r\n                        } else {\r\n                            cb()\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        })\r\n        verifyFunc.validate((status: T & articleType.venifyType) => {\r\n            if (status.result) {\r\n                return reject(status)\r\n            }\r\n            resolve(status)\r\n        })\r\n    })\r\n}\r\n","/* eslint-disable */\r\n\r\nimport hljs from 'highlight.js/lib/core'\r\nimport sql from 'highlight.js/lib/languages/sql'\r\nimport htmlbars from 'highlight.js/lib/languages/htmlbars'\r\nimport css from 'highlight.js/lib/languages/css'\r\nimport xml from 'highlight.js/lib/languages/xml'\r\nimport stylus from 'highlight.js/lib/languages/stylus'\r\nimport json from 'highlight.js/lib/languages/json'\r\nimport javascript from 'highlight.js/lib/languages/javascript'\r\nconst React = require('react')\r\n\r\nimport 'highlight.js/styles/github.css'\r\n\r\nconsole.log(hljs)\r\nconst languageData: any = {\r\n    sql: sql,\r\n    htmlbars: htmlbars,\r\n    css: css,\r\n    javascript: javascript,\r\n    xml: xml,\r\n    stylus: stylus,\r\n    json: json\r\n}\r\nObject.keys(languageData).forEach((v) => {\r\n    hljs.registerLanguage(v, languageData[v])\r\n})\r\n\r\nclass CodeStyle extends React.PureComponent {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.setRef = this.setRef.bind(this)\r\n    }\r\n\r\n    setRef(el: any) {\r\n        this.codeEl = el\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.highlightCode()\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.highlightCode()\r\n    }\r\n\r\n    highlightCode() {\r\n        hljs.highlightBlock(this.codeEl)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <pre>\r\n                <code ref={this.setRef} className={`language-${this.props.language}`}>\r\n                    {this.props.value}\r\n                </code>\r\n            </pre>\r\n        )\r\n    }\r\n}\r\n\r\nCodeStyle.defaultProps = {\r\n    language: ''\r\n}\r\n\r\nexport default CodeStyle\r\n","import React from 'react'\r\n\r\nimport { Popover, Button } from 'antd'\r\n\r\ninterface Iprops {\r\n    form: articleType.formType\r\n    tagData: articleType.tagType[]\r\n    setInp(e: string): void\r\n    uploadImg(e: React.ChangeEvent<HTMLInputElement>): void\r\n    clickFile(): void\r\n    removeImg(): void\r\n    selectTag(v: articleType.tagType): void\r\n    submit(e: React.MouseEvent<HTMLElement, MouseEvent>): void\r\n    uploadInput: React.LegacyRef<HTMLInputElement>\r\n}\r\n\r\nconst EditHeader = (props: Iprops): JSX.Element => {\r\n    const { form, tagData, uploadInput } = props\r\n\r\n    return (\r\n        <div className=\"edit-header\">\r\n            <input\r\n                type=\"file\"\r\n                onChange={props.uploadImg}\r\n                accept=\"image/*\"\r\n                className=\"uploadInput\"\r\n                ref={uploadInput}\r\n            ></input>\r\n            <div className=\"edit-article_title\">\r\n                <div className=\"edit-article_inp\">\r\n                    <input\r\n                        defaultValue={form.title}\r\n                        onChange={(e) => {\r\n                            props.setInp(e.target.value)\r\n                        }}\r\n                        placeholder=\"请输入文章标题...\"\r\n                    ></input>\r\n                </div>\r\n                <div className=\"edit-article-btn\">\r\n                    <div style={{ marginRight: '10px', display: 'flex', alignItems: 'center' }}>\r\n                        <Popover\r\n                            placement=\"bottom\"\r\n                            title=\"上传封面\"\r\n                            content={\r\n                                <div className=\"upload-content\">\r\n                                    {!form.articleImg ? (\r\n                                        <p onClick={props.clickFile}>点击添加封面</p>\r\n                                    ) : (\r\n                                        <div className=\"edit-article_img_box\">\r\n                                            <span onClick={props.removeImg}>x</span>\r\n                                            <img\r\n                                                src={form.articleImg}\r\n                                                style={{ width: '100%', height: '100%' }}\r\n                                            ></img>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            }\r\n                            trigger=\"click\"\r\n                        >\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n                                width=\"35px\"\r\n                                height=\"35px\"\r\n                                viewBox=\"0 0 28 28\"\r\n                                version=\"1.1\"\r\n                            >\r\n                                <title>699ED11E-7F16-40A5-89DD-C9ADE30CCB4C</title>\r\n                                <desc>Created with sketchtool.</desc>\r\n                                <defs />\r\n                                <g id=\"0.1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n                                    <g\r\n                                        id=\"Markdown－编辑3\"\r\n                                        transform=\"translate(-1247.000000, -18.000000)\"\r\n                                        fill=\"#BFC6CE\"\r\n                                    >\r\n                                        <g id=\"heder_img\" transform=\"translate(1247.000000, 18.000000)\">\r\n                                            <path d=\"M5,7 L24,7 L24,21 L5,21 L5,7 Z M6,8 L23,8 L23,15 L6,15 L6,8 Z M9,11 C9.55228475,11 10,10.5522847 10,10 C10,9.44771525 9.55228475,9 9,9 C8.44771525,9 8,9.44771525 8,10 C8,10.5522847 8.44771525,11 9,11 Z M22,14 L10,14 L14.2570991,10.8078101 L15.778026,11.8338712 L19.2346782,8.98370162 L22,11.0150952 L22,14 Z\" />\r\n                                        </g>\r\n                                    </g>\r\n                                </g>\r\n                            </svg>\r\n                        </Popover>\r\n                    </div>\r\n                    <div className=\"article-btn_subimt\">\r\n                        <Popover\r\n                            className=\"article-box\"\r\n                            placement=\"bottom\"\r\n                            title=\"发布文章\"\r\n                            content={\r\n                                <div className=\"article-submit_box\">\r\n                                    <ul className=\"submit-box_tag\">\r\n                                        <span>分类</span>\r\n                                        {tagData.map((v) => {\r\n                                            return (\r\n                                                <li\r\n                                                    key={v.id}\r\n                                                    onClick={() => {\r\n                                                        props.selectTag(v)\r\n                                                    }}\r\n                                                    className={v.checkouted ? 'article' : ''}\r\n                                                >\r\n                                                    {v.tag}\r\n                                                </li>\r\n                                            )\r\n                                        })}\r\n                                    </ul>\r\n                                    <div className=\"submit-submit\">\r\n                                        <Button type=\"primary\" onClick={props.submit}>\r\n                                            确定发布\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            trigger=\"click\"\r\n                        >\r\n                            发布\r\n                        </Popover>\r\n                    </div>\r\n                    <div className=\"article-btn_user\">\r\n                        <img src=\"https://mirror-gold-cdn.xitu.io/168e08e1a5a2e53f643?imageView2/1/w/64/h/64/q/85/interlace/1\"></img>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditHeader\r\n","export const markdownText = `\r\n#  H1\r\n##  H2\r\n###  H3\r\n####  H4\r\n#####  H5\r\n######  H6\r\n\r\n*斜体* or _强调_  \r\n**加粗** or __加粗__  \r\n***粗斜体*** or ___粗斜体__  \r\n\r\nUnordered 无序列表：\r\n* 无序列表\r\n* 子项\r\n* 子项\r\n \r\n+ 无序列表\r\n+ 子项\r\n+ 子项\r\n \r\n- 无序列表\r\n- 子项\r\n- 子项\r\n\r\nOrdered 有序列表：\r\n* 产品介绍（子项无项目符号）\r\n    此时子项，要以一个制表符或者4个空格缩进\r\n \r\n* 产品特点\r\n    1. 特点1\r\n    - 特点2\r\n    - 特点3\r\n* 产品功能\r\n    1. 功能1\r\n    - 功能2\r\n    - 功能3\r\n    \r\n[链接](http://www.w3cschool.cn/ \"W3Cschool\")\r\n![图片代替文字](http://39.108.184.64/image/111837354148716541576488564080.jpg \"标题文字\")\r\n\r\n段落\r\n> Email-style angle brackets\r\n> are used for blockquotes.\r\n> > And, they can be nested.\r\n> #### Headers in blockquotes\r\n> * You can quote a list.\r\n> * Etc.\r\n\r\n表格  \r\n\r\n|姓名|性别|年龄|\r\n|:---:|:---:|:---:|:---:|\r\n| 许道斌 | 男 | 18岁 |\r\n`\r\n","/* eslint-disable */\r\nexport const isArray = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Array]'\r\n}\r\n\r\nexport const isNumber = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Number]'\r\n}\r\n\r\nexport const isString = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object String]'\r\n}\r\n\r\nexport const isBoolean = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Boolean]'\r\n}\r\n\r\nexport const isFunc = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Function]'\r\n}\r\n\r\nexport const isObject = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Object]'\r\n}\r\n\r\nexport const isNull = (data) => {\r\n    return Object.prototype.toString.call(data) === '[object Null]'\r\n}\r\n\r\nexport const arrayLen = (data) => {\r\n    return isArray(data) ? data.length : null\r\n}\r\n\r\nexport const objectLen = (data) => {\r\n    return isObject(data) ? Object.keys(data).length : null\r\n}\r\n\r\nexport const isDate = (data) => {\r\n    return !!data && new Date(data).toString() !== 'Invalid Date'\r\n}\r\n\r\nexport const verifyDate = (val) => {\r\n    return isArray(val) ? isDate(val[0]) && isDate(val[1]) : isDate(val)\r\n}\r\n\r\nexport const getLen = (val) => {\r\n    return val ? val.length : null\r\n}\r\nexport const getObjLen = (val) => {\r\n    return Object.keys(val).length\r\n}\r\nexport const getNumLen = (val) => {\r\n    return val\r\n}\r\n\r\nexport const getType = (val) => {\r\n    return (val && val.constructor.name.toLowerCase()) || 'string'\r\n}\r\n\r\nexport const typeOfS = {\r\n    array: isArray,\r\n    object: isObject,\r\n    number: isNumber,\r\n    string: isString,\r\n    boolean: isBoolean,\r\n    date: verifyDate\r\n}\r\n\r\nexport const getTypeLen = {\r\n    array: getLen,\r\n    object: getObjLen,\r\n    number: getNumLen,\r\n    string: getLen,\r\n    date: getLen\r\n}\r\n","import React from 'react'\r\n\r\nimport { getArticleDate } from '@/utils/index'\r\n\r\ninterface Iprops {\r\n    articleList: articleType.articleItemType[]\r\n    navList: articleType.tagType[]\r\n    filterTag: (id: number) => void\r\n    goDetails(v: articleType.articleItemType): void\r\n}\r\n\r\nconst ArticleList = (props: Iprops): JSX.Element => {\r\n    const { articleList } = props\r\n\r\n    const tagName = (id: number): string => {\r\n        return props.navList.find((v) => v.id === id)?.tag\r\n    }\r\n\r\n    const tagClick = (id: number) => {\r\n        props.filterTag(id)\r\n    }\r\n\r\n    return (\r\n        <ul>\r\n            {articleList.map((v, i) => {\r\n                return (\r\n                    <li\r\n                        key={v.id}\r\n                        style={{ display: v.show ? 'flex' : 'none' }}\r\n                        className={`article-item ${v.hot ? 'article-item_hot' : ''}`}\r\n                        onClick={props.goDetails.bind(this, v)}\r\n                    >\r\n                        <div className=\"hd img-box\">\r\n                            <div className=\"img-back\" style={{ backgroundImage: `url('${v.articleImg}')` }}>\r\n                                <div className=\"article-date\">{getArticleDate(v.createDate)}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"td\">\r\n                            <div>\r\n                                <h3 className=\"article-name\">{v.title}</h3>\r\n                            </div>\r\n                            <div>\r\n                                <span>\r\n                                    <span\r\n                                        onClick={(e) => {\r\n                                            e.preventDefault()\r\n                                            e.stopPropagation()\r\n                                            tagClick(v.tagId)\r\n                                        }}\r\n                                        className=\"tag\"\r\n                                    >\r\n                                        {tagName(v.tagId)}\r\n                                    </span>\r\n                                </span>\r\n                                <div className=\"author\">作者: {v.userName}</div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                )\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default ArticleList\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport Header from '@/common/header'\r\nimport ArticleList from './components/list'\r\nimport ArticleSide from './components/side'\r\n\r\nimport { getTags, getArticle } from '@/server'\r\nimport { debounce } from '@/utils/index'\r\n\r\nimport { propsRoute } from '@/typescript/global'\r\n\r\nimport './index.less'\r\n\r\nconst Article: React.FC<propsRoute> = (props: propsRoute): JSX.Element => {\r\n    const [navList, setNavList] = useState<articleType.tagType[]>([])\r\n    const [articleList, setArticleList] = useState<articleType.articleItemType[]>([])\r\n    const [activedTag, setActivedTag] = useState<string | number>('all')\r\n    const [filterVal, steFilterVal] = useState<string>('')\r\n\r\n    const getTagsFunc = async (): Promise<any> => {\r\n        const res = await getTags(null)\r\n        setNavList(res || [])\r\n    }\r\n\r\n    const setListItem = (list: articleType.articleItemType[], hot?: boolean) => {\r\n        return list.map((v) => {\r\n            v.hot = v.major || v.major2\r\n            v.show = true\r\n            return v\r\n        })\r\n    }\r\n\r\n    const getArticleFunc = async (): Promise<any> => {\r\n        const res = await getArticle({\r\n            page: 0,\r\n            pageSize: 10000\r\n        })\r\n        const list = setListItem(res.list)\r\n        setArticleList(\r\n            list.sort(() => {\r\n                return Math.random() - 0.5\r\n            })\r\n        )\r\n    }\r\n\r\n    const getData = async (): Promise<any> => {\r\n        getTagsFunc()\r\n        getArticleFunc()\r\n    }\r\n\r\n    const goDetails = (item: articleType.articleItemType) => {\r\n        props.history.push(`/article-details?id=${item.id}`)\r\n    }\r\n\r\n    const tagFillter = (item: articleType.articleItemType, tagId: string | number): boolean => {\r\n        if (tagId === 'all') {\r\n            return true\r\n        } else if (tagId === 'hot') {\r\n            return item.hot\r\n        } else {\r\n            return String(item.tagId) === String(tagId)\r\n        }\r\n    }\r\n\r\n    const filterfList = (value: string, tagId: string | number): articleType.articleItemType[] => {\r\n        const val = value.toLocaleLowerCase()\r\n        return articleList.map((v) => {\r\n            const contentIsInCludes =\r\n                v.title.toLocaleLowerCase().includes(val) || v.userName.toLocaleUpperCase().includes(val)\r\n            const isActived = tagFillter(v, tagId)\r\n            v.show = contentIsInCludes && isActived\r\n            return v\r\n        })\r\n    }\r\n\r\n    const filterTag = (tagId: number | string) => {\r\n        if (!tagId || activedTag === tagId) {\r\n            return\r\n        }\r\n        setActivedTag(tagId)\r\n        setArticleList(filterfList(filterVal, tagId))\r\n    }\r\n\r\n    const changeVal = (value: string) => {\r\n        steFilterVal(value)\r\n        setArticleList(filterfList(value, activedTag))\r\n    }\r\n\r\n    const getIsNull = (): boolean => {\r\n        if (!(articleList && articleList.length)) {\r\n            return false\r\n        }\r\n        return articleList.some((v) => v.show)\r\n    }\r\n\r\n    const goAddArticle = () => {\r\n        props.history.push('/edit-article')\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData()\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Header className=\"\" router={props} />\r\n            <div className=\"article\">\r\n                <section className=\"content\">\r\n                    <div className=\"left\">\r\n                        <ArticleSide\r\n                            filterTag={filterTag}\r\n                            activedTag={activedTag}\r\n                            navList={navList}\r\n                            changeVal={debounce(changeVal, 500)}\r\n                        />\r\n                        <div className=\"article-edit-box\">\r\n                            <a onClick={goAddArticle}>\r\n                                <i className=\"iconfont icon-xiewenzhang edit-article\"></i>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"right\">\r\n                        {getIsNull() ? (\r\n                            <ArticleList\r\n                                filterTag={filterTag}\r\n                                articleList={articleList}\r\n                                navList={navList}\r\n                                goDetails={goDetails}\r\n                            />\r\n                        ) : (\r\n                            <div className=\"not-data\">\r\n                                <i className=\"iconfont icon-zanwushuju\"></i>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Article\r\n","import React from 'react'\r\n\r\nimport './index.less'\r\n\r\nconst ArticleDetails: React.FC<any> = (props: any): JSX.Element => {\r\n    return <div className=\"article-details_box\">详情</div>\r\n}\r\n\r\nexport default ArticleDetails\r\n","import React, { useEffect, useState, useRef } from 'react'\r\n\r\nimport ReactMarkdown from 'react-markdown'\r\nimport { message, Button, Input, Modal } from 'antd'\r\n\r\nimport CodeStyle from '@/common/article/code-style'\r\nimport HeadingBlock from '@/common/article/headering-block'\r\n\r\nimport { getUrlParam, formatDateTime, throttle } from '@/utils/index'\r\n\r\nimport { getArticleDetails, addCommentArticle, loveArticle, delArticleRequest } from '@/server'\r\n\r\nimport { propsRoute } from '@/typescript/index'\r\n\r\nimport './index.less'\r\nimport 'github-markdown-css'\r\n\r\ntype Iprops = propsRoute\r\n\r\nconst { confirm } = Modal\r\nconst { TextArea } = Input\r\nconst ArticleDetails: React.FC<Iprops> = (props: Iprops): JSX.Element => {\r\n    const [details, setDetails] = useState<articleType.articleDetails>({ pinglunList: [] } as any)\r\n    const [commentsVal, setCommentsVal] = useState<string>('')\r\n    const [goTop, setGoTop] = useState<boolean>(false)\r\n    const [routerParams] = useState<{ id: string }>(getUrlParam<{ id: string }>())\r\n\r\n    const areaRef = useRef<HTMLInputElement>()\r\n\r\n    const init = async () => {\r\n        if (!routerParams.id) {\r\n            message.error('参数错误')\r\n            return\r\n        }\r\n        const res = await getArticleDetails(routerParams.id)\r\n        setDetails(res)\r\n    }\r\n\r\n    const editArticle = (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault()\r\n        props.history.push(`/edit-article?id=${details.id}`)\r\n    }\r\n\r\n    const delTip = (cb: Function, text: string) => {\r\n        confirm({\r\n            title: text,\r\n            content: '确定要删除吗？',\r\n            okType: 'danger',\r\n            cancelText: '取消',\r\n            okText: '删除',\r\n            onOk: () => {\r\n                cb()\r\n            },\r\n            onCancel() {\r\n                console.log('Cancel')\r\n            }\r\n        })\r\n    }\r\n\r\n    const delArticle = () => {\r\n        delTip(() => {\r\n            delTip(async () => {\r\n                await delArticleRequest({ id: details.id })\r\n                message.success('删除成功')\r\n                setTimeout(() => {\r\n                    props.history.replace('/article')\r\n                }, 500)\r\n            }, '再次确定?')\r\n        }, '确定要删除？')\r\n    }\r\n\r\n    const loverArticle = async () => {\r\n        const data = await loveArticle({ id: +routerParams.id })\r\n        details.userLoveStatus = data.status\r\n        details.loveLen = Number(data.loveLen)\r\n        setDetails({ ...details })\r\n    }\r\n\r\n    const goPinLun = () => {\r\n        areaRef.current.focus()\r\n    }\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        setCommentsVal(e.target.value)\r\n    }\r\n\r\n    const submitPingLun = async () => {\r\n        if (!commentsVal || (commentsVal && commentsVal.length <= 5)) {\r\n            message.warning('请输入至少5个字符!')\r\n            return\r\n        }\r\n        await addCommentArticle({\r\n            text: commentsVal,\r\n            articleId: routerParams.id\r\n        })\r\n        message.success('发表成功!')\r\n        init()\r\n    }\r\n\r\n    const getArticleDate = (date: string): string => {\r\n        return ''\r\n    }\r\n\r\n    const goPageTop = () => {\r\n        window.scrollTo(0, 0)\r\n    }\r\n\r\n    const scrollPage = (): Function => {\r\n        return throttle(\r\n            () => {\r\n                if (document.documentElement.scrollTop >= 100) {\r\n                    setGoTop(true)\r\n                } else {\r\n                    setGoTop(false)\r\n                }\r\n            },\r\n            500,\r\n            800\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        init()\r\n        const sc: any = scrollPage()\r\n        window.addEventListener('scroll', sc)\r\n        return () => {\r\n            window.removeEventListener('scroll', sc)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"article-details_box\">\r\n            <div className=\"article-details_box\">\r\n                <div className=\"markdown-body_box\">\r\n                    <div className=\"article-user_box\">\r\n                        <div className=\"user-box_image\">\r\n                            <img src={details.userImage} />\r\n                        </div>\r\n                        <div className=\"article-user_text\">\r\n                            <span className=\"user-text_title\">{details.userName}</span>\r\n                            <p className=\"user-text_date\">\r\n                                <span>{formatDateTime(details.createDate)}</span>\r\n                                <span>阅读: {details.articleReadCountLen || 0}</span>\r\n                                {details.isEdit && (\r\n                                    <a onClick={editArticle}>\r\n                                        <b className=\"article-edit_btn\" onClick={editArticle}>\r\n                                            编辑\r\n                                        </b>\r\n                                    </a>\r\n                                )}\r\n                                {details.isEdit && (\r\n                                    <a>\r\n                                        <b className=\"article-edit_btn\" onClick={delArticle}>\r\n                                            删除\r\n                                        </b>\r\n                                    </a>\r\n                                )}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <h2 className=\"markdown-body_title\">{details.title}</h2>\r\n                    <ReactMarkdown\r\n                        className=\"markdown-body\"\r\n                        skipHtml={true}\r\n                        renderers={{\r\n                            code: CodeStyle as any,\r\n                            heading: HeadingBlock\r\n                        }}\r\n                        source={details.markdown}\r\n                    ></ReactMarkdown>\r\n                    <div className=\"article-left-tools\">\r\n                        <div className=\"left-tools_box\" onClick={loverArticle}>\r\n                            <span className=\"left-tools_tip\">{details.loveLen}</span>\r\n                            <i\r\n                                className={`iconfont icon-dianzan-copy left-tools_love ${\r\n                                    details.userLoveStatus === '1' ? 'left-tools-love_article' : ''\r\n                                }`}\r\n                            ></i>\r\n                        </div>\r\n                        <div className=\"left-tools_box\" onClick={goPinLun}>\r\n                            <i className=\"iconfont icon-pinglun left-tool_pinlun\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"article-pinglun_box\">\r\n                    <ul className=\"article-pinglun_ul\">\r\n                        <p className=\"pinglun-ul_title\">评论</p>\r\n                        <div className=\"pinglun-Text\">\r\n                            <TextArea\r\n                                value={commentsVal}\r\n                                onChange={onChange}\r\n                                placeholder=\"请开始您的表演，欢迎指出错误,一起学习。\"\r\n                                autosize={{ minRows: 3, maxRows: 5 }}\r\n                                ref={areaRef}\r\n                            />\r\n                            <Button type=\"primary\" style={{ marginTop: '10px' }} onClick={submitPingLun}>\r\n                                发表\r\n                            </Button>\r\n                        </div>\r\n                        {details.pinglunList.map((v) => {\r\n                            return (\r\n                                <li className=\"pinglun-ul_item\" key={v.createDate}>\r\n                                    <div className=\"pinglun-ul_item_top\">\r\n                                        <div className=\"pinglun-ul_touxiang\">\r\n                                            <img src={v.userImage}></img>\r\n                                        </div>\r\n                                        <span className=\"pinglun-span pinglun-userName\">{v.userName}</span>\r\n                                        <span className=\"pinglun-span pinglun-created\">\r\n                                            {getArticleDate(v.createDate)}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"pinglun-text_box\">\r\n                                        <p>{v.text}</p>\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n                {goTop && (\r\n                    <div className=\"article-gotop\" onClick={goPageTop}>\r\n                        <i className=\"iconfont icon-fanhuidingbu\"></i>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ArticleDetails\r\n","import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/seti.css'\r\n\r\nimport CodeMirror from 'codemirror'\r\nimport 'codemirror/addon/search/search'\r\nimport 'codemirror/addon/search/searchcursor'\r\nimport 'codemirror/addon/search/jump-to-line'\r\nimport 'codemirror/addon/hint/show-hint.css'\r\nimport 'codemirror/addon/hint/show-hint.js'\r\nimport 'codemirror/mode/javascript/javascript.js'\r\nimport 'codemirror/addon/hint/javascript-hint.js'\r\nimport 'codemirror/mode/sql/sql.js'\r\nimport 'codemirror/addon/hint/sql-hint.js'\r\nimport 'codemirror/mode/css/css.js'\r\nimport 'codemirror/addon/hint/css-hint.js'\r\nimport 'codemirror/mode/htmlembedded/htmlembedded.js'\r\nimport 'codemirror/addon/hint/html-hint.js'\r\nimport 'codemirror/mode/htmlmixed/htmlmixed.js'\r\nimport 'codemirror/addon/hint/xml-hint.js'\r\nimport 'codemirror/mode/xml/xml.js'\r\nimport 'codemirror/addon/edit/matchbrackets.js'\r\nimport 'codemirror/addon/edit/continuelist.js'\r\nimport 'codemirror/addon/edit/closebrackets.js'\r\nimport 'codemirror/mode/markdown/markdown.js'\r\nimport 'codemirror/keymap/sublime.js'\r\nimport 'codemirror/addon/dialog/dialog.js'\r\nimport 'codemirror/addon/comment/comment.js'\r\nimport 'codemirror/addon/wrap/hardwrap.js'\r\nimport 'codemirror/addon/scroll/simplescrollbars.css'\r\nimport 'codemirror/addon/scroll/simplescrollbars'\r\nimport 'codemirror/mode/vue/vue'\r\nimport 'codemirror/addon/selection/active-line'\r\nimport 'codemirror/mode/meta'\r\nimport 'codemirror/mode/http/http'\r\nimport 'codemirror/mode/clike/clike'\r\n\r\nconst IS_MOBILE =\r\n    typeof navigator === 'undefined' ||\r\n    navigator.userAgent.match(/Android/i) ||\r\n    navigator.userAgent.match(/webOS/i) ||\r\n    navigator.userAgent.match(/iPhone/i) ||\r\n    navigator.userAgent.match(/iPad/i) ||\r\n    navigator.userAgent.match(/iPod/i) ||\r\n    navigator.userAgent.match(/BlackBerry/i) ||\r\n    navigator.userAgent.match(/Windows Phone/i)\r\n\r\ninterface Iprops {\r\n    value: number | string\r\n    onChange(val: React.MouseEvent<HTMLLIElement, MouseEvent>): void\r\n    editOnScroll(e: any): void\r\n    readOnly?: boolean\r\n    defaultValue?: string\r\n    textAreaClassName?: string\r\n}\r\nclass CodeMirrorEditor extends React.Component<Iprops, any> {\r\n    editor: any\r\n    constructor(props: Iprops) {\r\n        super(props)\r\n        this.state = { isControlled: Boolean(this.props.value) }\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.editorRef = React.createRef()\r\n    }\r\n\r\n    componentDidMount() {\r\n        const isTextArea = this.props.forceTextArea || IS_MOBILE\r\n        if (!isTextArea) {\r\n            this.editor = CodeMirror.fromTextArea(this.editorRef.current, {\r\n                keyMap: 'sublime',\r\n                mode: 'markdown',\r\n                theme: 'seti',\r\n                gitHubSpice: true,\r\n                taskLists: true,\r\n                strikethrough: true,\r\n                emoji: false,\r\n                lineWrapping: true,\r\n                value: this.props.value,\r\n                autoRefresh: true,\r\n                json: true,\r\n                indentUnit: 4,\r\n                tabSize: 4,\r\n                coder: null,\r\n                extraKeys: { Ctrl: 'autocomplete' },\r\n                onChange: this.props.onChange\r\n            })\r\n            this.editor.on('change', this.handleChange)\r\n            this.editor.on('scroll', this.props.editOnScroll)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (!this.editor) {\r\n            return\r\n        }\r\n        if (this.props.value) {\r\n            if (this.editor.getValue() !== this.props.value) {\r\n                this.editor.setValue(this.props.value)\r\n            }\r\n        }\r\n    }\r\n\r\n    setCursor() {\r\n        this.editor.doc.setCursor(this.editor.doc.lineCount() - 1, 0)\r\n    }\r\n\r\n    handleChange() {\r\n        if (!this.editor) {\r\n            return\r\n        }\r\n        const value = this.editor.getValue()\r\n        if (value === this.props.value) {\r\n            return\r\n        }\r\n\r\n        if (this.props.onChange) {\r\n            this.props.onChange({ target: { value: value } })\r\n        }\r\n\r\n        if (this.editor.getValue() !== this.props.value) {\r\n            if (this.state.isControlled) {\r\n                this.editor.setValue(this.props.value)\r\n            } else {\r\n                this.props.value = value\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const editor = React.createElement('textarea', {\r\n            ref: this.editorRef,\r\n            // value: this.props.value,\r\n            readOnly: this.props.readOnly,\r\n            defaultValue: this.props.value,\r\n            onChange: this.props.onChange,\r\n            className: this.props.textAreaClassName\r\n        })\r\n\r\n        return React.createElement('div', null, editor)\r\n    }\r\n}\r\n\r\nexport default CodeMirrorEditor\r\n","import React from 'react'\r\n\r\nimport { Tooltip } from 'antd'\r\n\r\ninterface Iprops {\r\n    clickFile(): void\r\n    activedPreview(e: React.MouseEvent<HTMLLIElement, MouseEvent>): void\r\n    preview: boolean\r\n    centerInput: React.LegacyRef<HTMLInputElement>\r\n    centerUploadImg: (e: React.ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nconst EditTip = (props: Iprops) => {\r\n    const { preview } = props\r\n    return (\r\n        <ul className=\"textare-tools\">\r\n            <input\r\n                type=\"file\"\r\n                onChange={props.centerUploadImg}\r\n                accept=\"image/*\"\r\n                className=\"centeruploadInput\"\r\n                ref={props.centerInput}\r\n            ></input>\r\n            <li\r\n                onClick={(e) => {\r\n                    props.clickFile()\r\n                }}\r\n            >\r\n                <Tooltip title=\"上传图片\">\r\n                    <i className=\"iconfont icon-shangchuan\"></i>\r\n                </Tooltip>\r\n            </li>\r\n            <li onClick={props.activedPreview}>\r\n                <Tooltip title={`${preview ? '预览(不要刷新）' : '收起(刷新会丢失)'}`}>\r\n                    <i className={`iconfont ${!preview ? 'icon-BMSzhuanqu_suofang' : 'icon-suofang'}`}></i>\r\n                </Tooltip>\r\n            </li>\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default EditTip\r\n","import React, { useState } from 'react'\r\n\r\nimport { Input } from 'antd'\r\n\r\nimport { SearchOutlined } from '@ant-design/icons'\r\n\r\ninterface Iprops {\r\n    filterTag(id: string): void\r\n    changeVal(e: string): void\r\n    navList: articleType.tagType[]\r\n    activedTag: string | number\r\n}\r\n\r\nconst ArticleSide = (props: Iprops): JSX.Element => {\r\n    const [val, setVal] = useState<string>('')\r\n    const { navList, activedTag } = props\r\n\r\n    const filterTag = (event: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\r\n        const tagId = event.target.getAttribute('tag-id')\r\n        props.filterTag(tagId)\r\n    }\r\n    console.log(activedTag)\r\n    return (\r\n        <ul>\r\n            <li className=\"td\">\r\n                <ul className=\"td-ul\" onClick={filterTag}>\r\n                    <li>\r\n                        <Input\r\n                            value={val}\r\n                            prefix={<SearchOutlined color=\"#e8e8e8\" size={20} />}\r\n                            onChange={(e) => {\r\n                                setVal(e.target.value)\r\n                                props.changeVal(e.target.value)\r\n                            }}\r\n                            type=\"text\"\r\n                            placeholder=\"输入标题、作者搜索\"\r\n                        />\r\n                    </li>\r\n                    <li className={`${activedTag === 'all' && 'active'}`} tag-id=\"all\">\r\n                        全部\r\n                    </li>\r\n                    <li className={`${activedTag === 'hot' && 'active'}`} tag-id=\"hot\">\r\n                        星标\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n            <li className=\"bd\">\r\n                <ul onClick={filterTag}>\r\n                    {navList.map((v) => {\r\n                        return (\r\n                            <li\r\n                                className={`${String(activedTag) === String(v.id) && 'active'}`}\r\n                                tag-id={v.id}\r\n                                key={v.id}\r\n                            >\r\n                                {v.tag}\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default ArticleSide\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nimport ReactMarkdown from 'react-markdown'\r\nimport { message } from 'antd'\r\n\r\nimport CodeMirrorEditor from './components/code-mirror-editor'\r\nimport CodeStyle from '@/common/article/code-style'\r\nimport EditTip from './components/tip'\r\nimport EditHeader from './components/edit-header'\r\n\r\nimport { useSetState } from '@/hooks/index'\r\nimport { markdownText } from './default'\r\nimport { VisitorFormVerify } from './utils'\r\nimport { compressionImg, getUrlParam } from '@/utils'\r\n\r\nimport { getTags, uploadImage, getArticleDetails, addArticle, editArticleDetials } from '@/server'\r\n\r\nimport { propsRoute } from '@/typescript'\r\n\r\nimport 'github-markdown-css'\r\nimport './index.less'\r\n\r\ntype Iprops = propsRoute\r\n\r\ninterface docType {\r\n    doc: {\r\n        scrollTop: number\r\n        height: number\r\n    }\r\n}\r\n\r\nconst EditArticle: React.FC<Iprops> = (props: Iprops): JSX.Element => {\r\n    const [state, setState] = useSetState<articleType.stateType>({\r\n        form: {\r\n            markdown: markdownText,\r\n            tagId: undefined,\r\n            title: '',\r\n            articleImg: '',\r\n            id: undefined\r\n        },\r\n        tagData: [],\r\n        preview: true\r\n    })\r\n\r\n    const codeMirror = useRef<any>()\r\n    const uploadInput = useRef<HTMLInputElement>()\r\n    const centerInput = useRef<HTMLInputElement>()\r\n    const editArticle = useRef<HTMLDivElement>()\r\n    const previewBox = useRef<HTMLDivElement>()\r\n\r\n    const editOnScroll = (e: docType) => {\r\n        const { scrollTop, height } = e.doc\r\n        const boxHeight = editArticle.current.getBoundingClientRect().height\r\n        const previewHeight = document.querySelector('.markdown-body').getBoundingClientRect().height\r\n        const scale = (height - boxHeight) / (previewHeight - boxHeight)\r\n        previewBox.current.scrollTo(0, scrollTop / scale)\r\n    }\r\n\r\n    const onChange = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\r\n        const { form } = state\r\n        form.markdown = e.target.value\r\n        setStatForm()\r\n    }\r\n\r\n    const activedPreview = (e: React.MouseEvent<HTMLLIElement, MouseEvent>): void => {\r\n        setState({\r\n            preview: !preview\r\n        })\r\n    }\r\n\r\n    const setStatForm = () => {\r\n        setState({\r\n            form: { ...form }\r\n        })\r\n    }\r\n\r\n    const setInp = (e: string) => {\r\n        const { form } = state\r\n        form.title = e\r\n        setStatForm()\r\n    }\r\n\r\n    const upload = async (e: React.ChangeEvent<HTMLInputElement>): Promise<string> => {\r\n        const imgBase64 = await compressionImg(e)\r\n        const { path } = await uploadImage({ file: imgBase64 })\r\n        uploadInput.current.value = ''\r\n        centerInput.current.value = ''\r\n        return path\r\n    }\r\n\r\n    const uploadImg = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { form } = state\r\n        form.articleImg = await upload(e)\r\n        setStatForm()\r\n    }\r\n\r\n    const centerUploadImg = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const path = await upload(e)\r\n        const { form } = state\r\n        form.markdown += `  ![](${path})`\r\n        setState({\r\n            form: { ...form }\r\n        })\r\n        setTimeout(() => {\r\n            codeMirror.current.setCursor()\r\n        }, 20)\r\n    }\r\n\r\n    const removeImg = () => {\r\n        const { form } = state\r\n        form.articleImg = ''\r\n        uploadInput.current.value = ''\r\n        setStatForm()\r\n    }\r\n\r\n    const selectTag = (v: articleType.tagType) => {\r\n        let { tagData, form } = state\r\n        tagData = tagData.map((item) => {\r\n            item.checkouted = item.id === v.id\r\n            return { ...item }\r\n        })\r\n        form.tagId = v.id\r\n        setState({\r\n            tagData,\r\n            form: { ...form }\r\n        })\r\n    }\r\n\r\n    const overEnter = async () => {\r\n        const { form } = state\r\n        const httpPost = form.id ? editArticleDetials : addArticle\r\n        try {\r\n            await httpPost(form)\r\n            message.success('保存成功')\r\n            props.history.push('/article')\r\n        } catch (err) {\r\n            message.error('保存失败')\r\n        }\r\n    }\r\n\r\n    const submit = async (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        e.stopPropagation()\r\n        try {\r\n            const { form } = state\r\n            await VisitorFormVerify<articleType.venifyType>(form)\r\n            overEnter()\r\n        } catch (status) {\r\n            message.error(status.message)\r\n        }\r\n    }\r\n\r\n    const getNav = async (id: number) => {\r\n        const res = await getTags(null)\r\n        setState({\r\n            tagData: res.map((v) => {\r\n                v.checkouted = v.id === id\r\n                return v\r\n            })\r\n        })\r\n    }\r\n\r\n    const getDetails = async (id: string) => {\r\n        if (!id) {\r\n            getNav(null)\r\n            return\r\n        }\r\n        const res = await getArticleDetails(id)\r\n        await getNav(res.tagId)\r\n        setState({\r\n            form: {\r\n                markdown: res.markdown,\r\n                tagId: res.tagId,\r\n                title: res.title,\r\n                articleImg: res.articleImg,\r\n                id: +id\r\n            }\r\n        })\r\n    }\r\n\r\n    const init = () => {\r\n        const { id } = getUrlParam<{ id: string }>()\r\n        getDetails(id)\r\n    }\r\n\r\n    const clickFile = () => {\r\n        uploadInput.current.click()\r\n    }\r\n\r\n    const clickFile2 = () => {\r\n        centerInput.current.click()\r\n    }\r\n\r\n    const { form, tagData, preview } = state\r\n\r\n    useEffect(() => {\r\n        init()\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"edit-article_box\">\r\n            <EditHeader\r\n                form={form}\r\n                tagData={tagData}\r\n                setInp={setInp}\r\n                uploadImg={uploadImg}\r\n                clickFile={clickFile}\r\n                removeImg={removeImg}\r\n                uploadInput={uploadInput}\r\n                selectTag={selectTag}\r\n                submit={submit}\r\n            />\r\n            <div className=\"edit-article-edit\">\r\n                <div\r\n                    ref={editArticle}\r\n                    className=\"edit-article-textare editor-pane\"\r\n                    style={{ display: `${preview ? 'block' : 'none'}` }}\r\n                >\r\n                    <CodeMirrorEditor\r\n                        ref={codeMirror}\r\n                        editOnScroll={editOnScroll}\r\n                        value={form.markdown}\r\n                        onChange={onChange}\r\n                    />\r\n                </div>\r\n                <div\r\n                    ref={previewBox}\r\n                    className={`edit-article-markdown result-pane ${\r\n                        !preview ? 'preview-edit' : 'engter-edit'\r\n                    }`}\r\n                >\r\n                    <ReactMarkdown\r\n                        className=\"markdown-body\"\r\n                        skipHtml={true}\r\n                        renderers={{ code: CodeStyle as any }}\r\n                        source={form.markdown}\r\n                    ></ReactMarkdown>\r\n                    <EditTip\r\n                        centerInput={centerInput}\r\n                        centerUploadImg={centerUploadImg}\r\n                        preview={preview}\r\n                        clickFile={clickFile2}\r\n                        activedPreview={activedPreview}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditArticle\r\n","/* eslint-disable */\r\n\r\nimport React, { PureComponent } from 'react'\r\nconst elements: any = {\r\n    h1: 'h1',\r\n    h2: 'h2',\r\n    h3: 'h3',\r\n    h4: 'h4',\r\n    h5: 'h5',\r\n    h6: 'h6'\r\n}\r\n\r\nfunction Heading({ level, children, ...props }: any) {\r\n    return React.createElement(elements[level] || elements.h1, props, children)\r\n}\r\n\r\nHeading.defaultProps = {\r\n    type: 'h1'\r\n}\r\n\r\nclass HeadingBlock extends PureComponent {\r\n    renderHtml = () => {\r\n        const { level, children } = this.props as any\r\n\r\n        if (children && children.length > 0) {\r\n            const nodeValue = children[0].props.value\r\n            return (\r\n                <Heading level={`h${level}`} id={nodeValue}>\r\n                    <span className=\"title\">{children}</span>\r\n                </Heading>\r\n            )\r\n        } else {\r\n            return <React.Fragment>{children}</React.Fragment>\r\n        }\r\n    }\r\n    render() {\r\n        return <React.Fragment>{this.renderHtml()}</React.Fragment>\r\n    }\r\n}\r\n\r\nexport default HeadingBlock\r\n"],"sourceRoot":""}