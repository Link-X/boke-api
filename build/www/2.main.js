(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{156:function(e,t,n){(e.exports=n(13)(!1)).push([e.i,".edit-article-edit {\n  display: flex;\n  height: 100%;\n}\n.edit-article-edit > div {\n  width: 50%;\n  height: 100%;\n}\n.edit-article-edit .cm-s-material .CodeMirror-cursor {\n  border-left: 1px solid #333;\n}\n.edit-article-edit .cm-header-3 {\n  color: #1BA2F0;\n  margin-bottom: 10px;\n  display: inline-block;\n}\n.editor-pane {\n  position: relative;\n}\n.editor-pane > div {\n  height: 100%;\n}\n.CodeMirror {\n  height: 100%;\n}\n.markdown-body {\n  box-sizing: border-box;\n  min-width: 200px;\n  width: 1200px;\n  line-height: 2.5;\n}\n.edit-article_title {\n  display: flex;\n  height: 59px;\n  background-color: #fff;\n  border-bottom: 1px solid #ddd;\n  padding: 0 20px;\n}\n.edit-article_inp {\n  width: 88%;\n}\n.edit-article_inp input {\n  margin: 0;\n  padding: 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: #000;\n  border: none;\n  outline: none;\n  width: 100%;\n  height: 100%;\n}\n.edit-article-btn {\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  cursor: pointer;\n  flex: 1;\n}\n.article-btn_user {\n  width: 33px;\n  height: 33px;\n  border-radius: 50%;\n  overflow: hidden;\n}\n.article-btn_user img {\n  width: 100%;\n  height: 100%;\n}\n.article-btn_subimt {\n  color: #007fff;\n  margin-right: 10px;\n  cursor: pointer;\n  font-size: 16px;\n}\n.result-pane {\n  padding: 10px 20px;\n  overflow: scroll;\n}\n.content {\n  width: 100%;\n  height: 116px;\n  background-color: #fff;\n  text-align: center;\n  line-height: 116px;\n  cursor: pointer;\n}\n.content p:hover {\n  background-color: #ddd;\n}\n.submit-box_tag span {\n  display: block;\n  width: 100%;\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n.submit-box_tag li {\n  display: inline-block;\n  margin: 0 10px 14px 0;\n  padding: 3px 6px;\n  font-size: 12px;\n  white-space: nowrap;\n  border: 1px solid #f1f1f1;\n  border-radius: 2px;\n  cursor: pointer;\n}\n.submit-box_tag .article {\n  color: #007fff;\n  border-color: rgba(0, 127, 255, 0.15);\n  background-color: rgba(0, 127, 255, 0.05);\n}\n.article-submit_box {\n  min-width: 375px;\n}\n.submit-submit {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.uploadInput {\n  opacity: 0;\n  position: absolute;\n  top: -1000;\n}\n.edit-article-update_img {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n.edit-article-update_img i {\n  font-size: 17px;\n  font-weight: bold;\n}\n.edit-article_img_box {\n  height: 100%;\n  max-width: 260px;\n  position: relative;\n}\n.edit-article_img_box span {\n  position: absolute;\n  top: -1px;\n  right: -4px;\n  width: 14px;\n  height: 14px;\n  background-color: red;\n  color: #fff;\n  line-height: 12px;\n  border-radius: 50%;\n}\n",""])},157:function(e,t,n){(e.exports=n(13)(!1)).push([e.i,".chat-center-box .article-details_box {\n  width: 100%;\n  min-height: 100%;\n  height: auto;\n  background-color: #f4f5f5;\n}\n.chat-center-box .markdown-body_box {\n  width: 1180px;\n  padding: 0 36px;\n  margin: 0 auto;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  position: relative;\n  background-color: #fff;\n  padding-bottom: 100px;\n}\n.chat-center-box .markdown-body_box .article-user_box {\n  width: 100%;\n}\n.chat-center-box .markdown-body_box .markdown-body_title {\n  width: 100%;\n  font-size: 28px;\n  margin: 0 0 40px 0;\n  font-weight: bold;\n  color: #000;\n}\n.chat-center-box .markdown-body_box .article-user_box {\n  display: flex;\n  align-items: center;\n  margin-bottom: 22px;\n}\n.chat-center-box .markdown-body_box .user-box_image {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin-right: 10px;\n}\n.chat-center-box .markdown-body_box .user-box_image img {\n  width: 100%;\n  height: 100%;\n}\n.chat-center-box .markdown-body_box .article-user_text {\n  min-width: 0;\n  flex-grow: 1;\n}\n.chat-center-box .markdown-body_box .article-user_text .user-text_title {\n  display: inline-block;\n  max-width: 100%;\n  font-size: 14px;\n  font-weight: 700;\n  color: #333;\n}\n.chat-center-box .markdown-body_box .article-user_text .user-text_date {\n  font-size: 10px;\n  color: #909090;\n}\n.chat-center-box .markdown-body_box .article-user_text .user-text_date span {\n  margin-right: 5px;\n}\n.chat-center-box .markdown-body_box .article-user_text .user-text_date .article-edit_btn {\n  color: #007fff;\n  cursor: pointer;\n}\n.chat-center-box .markdown-body_box .article-user_text .user-text_date .article-edit_btn:last-child {\n  margin-left: 10px;\n}\n.chat-center-box .markdown-body_box .article-left-tools {\n  position: absolute;\n  top: 214px;\n  left: -62px;\n  cursor: pointer;\n}\n.chat-center-box .markdown-body_box .article-left-tools .left-tools_box {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: #fff;\n  margin-bottom: 10px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.04);\n  color: #595959;\n  position: relative;\n}\n.chat-center-box .markdown-body_box .article-left-tools .left-tools_box .left-tools-love_article {\n  color: #007fff;\n}\n.chat-center-box .markdown-body_box .article-left-tools .left-tools_box .left-tools_tip {\n  position: absolute;\n  top: -3px;\n  right: -1px;\n  width: 16px;\n  height: 16px;\n  font-size: 10px;\n  text-align: center;\n  border-radius: 50%;\n  background-color: #cc1818;\n  line-height: 16px;\n  color: #fff;\n  font-weight: bold;\n}\n.chat-center-box .markdown-body_box i {\n  display: inline-block;\n  font-size: 24px;\n}\n.chat-center-box .markdown-body_box .left-tool_pinlun {\n  margin-top: 2px;\n}\n.chat-center-box .article-pinglun_box {\n  width: 1180px;\n  margin: 0 auto;\n  padding-bottom: 50px;\n  margin-top: 30px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_title {\n  font-weight: bold;\n  font-size: 18px;\n  color: #333;\n  margin-bottom: 10px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item {\n  margin-bottom: 22px;\n  border-bottom: 1px solid #ddd;\n  padding-bottom: 20px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-ul_item_top {\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 16px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-ul_item_top .pinglun-ul_touxiang {\n  width: 32px;\n  height: 32px;\n  margin-right: 5px;\n  border-radius: 50%;\n  overflow: hidden;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-ul_item_top .pinglun-ul_touxiang img {\n  width: 100%;\n  height: 100%;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-ul_item_top .pinglun-span {\n  font-weight: bold;\n  color: #333;\n  margin-right: 5px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-ul_item_top .pinglun-created {\n  font-weight: 100;\n  color: #afafaf;\n  font-size: 12px;\n}\n.chat-center-box .article-pinglun_box .pinglun-ul_item .pinglun-text_box {\n  padding-left: 46px;\n}\n.chat-center-box .article-gotop {\n  position: fixed;\n  bottom: 39px;\n  right: 26px;\n  text-align: center;\n  cursor: pointer;\n}\n.chat-center-box .article-gotop i {\n  font-size: 26px;\n}\n.chat-center-box .pinglun-Text {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 16px;\n}\n",""])},238:function(e,t,n){"use strict";var a=x(n(19)),i=x(n(3)),l=x(n(6)),o=x(n(2)),r=x(n(5)),s=x(n(185)),d=x(n(624)),c=x(n(625)),u=x(n(626)),f=x(n(627)),p=x(n(628)),m=x(n(629)),g=x(n(630)),h=x(n(631));function x(e){return e&&e.__esModule?e:{default:e}}n(632);var b=n(1),v={sql:c.default,htmlbars:u.default,css:f.default,javascript:h.default,xml:p.default,stylus:m.default,json:g.default};(0,s.default)(v).forEach(function(e){d.default.registerLanguage(e,v[e])});var _=function(e){function t(e){(0,i.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.setRef=n.setRef.bind(n),n}return(0,r.default)(t,e),(0,l.default)(t,[{key:"setRef",value:function(e){this.codeEl=e}},{key:"componentDidMount",value:function(){this.highlightCode()}},{key:"componentDidUpdate",value:function(){this.highlightCode()}},{key:"highlightCode",value:function(){d.default.highlightBlock(this.codeEl)}},{key:"render",value:function(){return b.createElement("pre",null,b.createElement("code",{ref:this.setRef,className:"language-"+this.props.language},this.props.value))}}]),t}(b.PureComponent);_.defaultProps={language:""},e.exports=_},594:function(e,t,n){"use strict";var a=d(n(19)),i=d(n(3)),l=d(n(6)),o=d(n(2)),r=d(n(5));n(595),n(596);var s=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}n(597),n(598),n(91),n(599),n(232),n(600),n(57),n(601),n(602),n(603),n(154),n(234),n(92),n(235),n(604),n(605),n(606),n(607),n(237),n(608),n(155),n(609),n(610),n(611),n(612),n(613),n(621),n(236),n(622),n(623);var c=n(1),u="undefined"==typeof navigator||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),f=function(e){function t(e){(0,i.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={isControlled:Boolean(n.props.value)},n.handleChange=n.handleChange.bind(n),n.editorRef=c.createRef(),n}return(0,r.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.forceTextArea||u||(console.log(this.props),this.editor=s.default.fromTextArea(this.editorRef.current,{keyMap:"sublime",mode:"markdown",theme:"seti",gitHubSpice:!0,taskLists:!0,strikethrough:!0,emoji:!1,value:this.props.value,autoRefresh:!0,json:!0,indentUnit:4,tabSize:4,coder:null,extraKeys:{Ctrl:"autocomplete"},onChange:this.props.onChange}),this.editor.on("change",this.handleChange))}},{key:"componentDidUpdate",value:function(){this.editor&&this.props.value&&this.editor.getValue()!==this.props.value&&this.editor.setValue(this.props.value)}},{key:"handleChange",value:function(){if(this.editor){var e=this.editor.getValue();e!==this.props.value&&(this.props.onChange&&this.props.onChange({target:{value:e}}),this.editor.getValue()!==this.props.value&&(this.state.isControlled?this.editor.setValue(this.props.value):this.props.value=e))}}},{key:"render",value:function(){var e=c.createElement("textarea",{ref:this.editorRef,value:this.props.value,readOnly:this.props.readOnly,defaultValue:this.props.defaultValue,onChange:this.props.onChange,className:this.props.textAreaClassName});return c.createElement("div",null,e)}}]),t}(c.Component);e.exports=f},633:function(e,t,n){var a=n(156);"string"==typeof a&&(a=[[e.i,a,""]]);var i=n(14)(a,{hmr:!0,transform:void 0,insertInto:void 0});a.locals&&(e.exports=a.locals),e.hot.accept(156,function(){var t=n(156);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,a=0;for(n in e){if(!t||e[n]!==t[n])return!1;a++}for(n in t)a--;return 0===a}(a.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)}),e.hot.dispose(function(){i()})},634:function(e,t,n){var a=n(157);"string"==typeof a&&(a=[[e.i,a,""]]);var i=n(14)(a,{hmr:!0,transform:void 0,insertInto:void 0});a.locals&&(e.exports=a.locals),e.hot.accept(157,function(){var t=n(157);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,a=0;for(n in e){if(!t||e[n]!==t[n])return!1;a++}for(n in t)a--;return 0===a}(a.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)}),e.hot.dispose(function(){i()})},667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=x(n(52)),i=x(n(509)),l=x(n(4)),o=x(n(79)),r=x(n(19)),s=x(n(3)),d=x(n(6)),c=x(n(2)),u=x(n(5));n(95),n(513),n(81);var f=x(n(1)),p=x(n(224)),m=x(n(594)),g=x(n(238)),h=n(45);function x(e){return e&&e.__esModule?e:{default:e}}n(633),n(239);var b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.clickFile=function(){n.refs.uploadInput.click()},n.state={form:{markdown:"",tagId:"",title:"",articleImg:""},tagData:[]},n.uploadImg=n.uploadImg.bind(n),n.onChange=n.onChange.bind(n),n.submit=n.submit.bind(n),n.setInp=n.setInp.bind(n),n.selectTag=n.selectTag.bind(n),n.removeImg=n.removeImg.bind(n),n}return(0,u.default)(t,e),(0,d.default)(t,[{key:"videtd",value:function(){var e=this.state.form,t={ok:!0,msg:""};return(!e.markdown||e.markdown.length<60)&&(t={ok:!1,msg:"内容请最少输入60字"}),e.tagId||0===e.tagId||(t={ok:!1,msg:"请选择标签"}),(!e.title||e.title.length<3)&&(t={ok:!1,msg:"请输入标题,最少3个字符"}),t}},{key:"submit",value:function(e){var t=this;e.stopPropagation();var n=this.videtd();if(n.ok){var a=this.state.form;a.id?(0,h.editArticleDetials)(a).then(function(e){e&&e.data&&0===e.data.code?(o.default.success("编辑成功"),t.props.history.go(-1)):o.default.error("编辑失败")}):(0,h.addArticle)(a).then(function(e){e&&e.data&&0===e.data.code?(o.default.success("保存成功"),t.props.history.go(-1)):o.default.error("保存失败")})}else o.default.error(n.msg)}},{key:"getNav",value:function(){var e=this;(0,h.getTags)().then(function(t){t&&e.setState({tagData:t.data.map(function(e){return e.checkouted=!1,e})}),e.props.history.location.query&&e.props.history.location.query.id&&e.getArticleDetails(e.props.history.location.query.id)})}},{key:"onChange",value:function(e){var t=this.state.form;t.markdown=e.target.value,this.setState({form:t})}},{key:"selectTag",value:function(e){var t=this.state,n=t.form,a=t.tagData;a.forEach(function(t){t.checkouted=!1,t.id===e.id&&(t.checkouted=!0)}),n.tagId=e.id,this.setState({form:n,tagData:a})}},{key:"setInp",value:function(e){var t=this.state.form;t.title=e.target.value,this.setState({form:t})}},{key:"getImgSize",value:function(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").replace("data:image/jpeg;base64,","").length;return e=(parseInt(t-t/8*2)/1024).toFixed(2),parseInt(e)}},{key:"compressImage",value:function(e,t){var n=new Image,a="";n.src=e,n.onload=function(){var e=n.width,i=n.height,l=document.createElement("canvas"),o=l.getContext("2d");l.width=e,l.height=i,o.drawImage(n,0,0,e,i),a=l.toDataURL("image/jpeg",.6),t(a)}}},{key:"uploadImg",value:function(e){var t=e.target.files[0];if(-1!==(t.type||"image/png").indexOf("image")){var n=new FileReader,a=this;n.readAsDataURL(t),n.onloadend=function(e){a.compressImage(e.target.result,function(e){5120<(a.getImgSize(e)||0)?o.default.info("上传图片过大"):(0,h.uploadImage)({file:e}).then(function(e){if(e&&e.data&&0===e.data.code){var t=a.state.form;t.articleImg=e.data.data.path,a.setState({form:t},function(){a.refs.uploadInput.value=""})}})})}}else o.default.info("文件类型错误o")}},{key:"removeImg",value:function(){var e=this.state.form;e.articleImg="",this.refs.uploadInput.value="",this.setState({form:e})}},{key:"getArticleDetails",value:function(e){var t=this;(0,h.getArticleDetails)({id:e}).then(function(e){if(e&&e.data&&0===e.data.code){var n=e.data.data,a=t.state.form,i={markdown:n.markdown,tagId:n.tagId,title:n.title,articleImg:n.articleImg,id:t.props.history.location.query.id};t.selectTag({id:n.tagId}),t.setState({form:(0,l.default)({},a,i)})}})}},{key:"componentDidMount",value:function(){this.getNav()}},{key:"render",value:function(){var e=this,t=this.state,n=t.form,l=t.tagData;return f.default.createElement("div",{className:"edit-article_box"},f.default.createElement("input",{type:"file",onChange:this.uploadImg,accept:"image/*",className:"uploadInput",ref:"uploadInput"}),f.default.createElement("div",{className:"edit-article_title"},f.default.createElement("div",{className:"edit-article_inp"},f.default.createElement("input",{value:n.title,onChange:this.setInp,placeholder:"请输入标题..."})),f.default.createElement("div",{className:"edit-article-btn"},f.default.createElement("div",{style:{marginRight:"10px",display:"flex",alignItems:"center"}},f.default.createElement(i.default,{placement:"bottom",title:"上传图片(在这取url)",content:f.default.createElement("div",{className:"content"},this.state.form.articleImg?f.default.createElement("div",{className:"edit-article_img_box"},f.default.createElement("span",{onClick:this.removeImg},"x"),f.default.createElement("img",{src:this.state.form.articleImg,style:{width:"100%",height:"100%"}})):f.default.createElement("p",{onClick:this.clickFile},"点击添加封面")),trigger:"click"},f.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"35px",height:"35px",viewBox:"0 0 28 28",version:"1.1"},f.default.createElement("title",null,"699ED11E-7F16-40A5-89DD-C9ADE30CCB4C"),f.default.createElement("desc",null,"Created with sketchtool."),f.default.createElement("defs",null),f.default.createElement("g",{id:"0.1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},f.default.createElement("g",{id:"Markdown－编辑3",transform:"translate(-1247.000000, -18.000000)",fill:"#BFC6CE"},f.default.createElement("g",{id:"heder_img",transform:"translate(1247.000000, 18.000000)"},f.default.createElement("path",{d:"M5,7 L24,7 L24,21 L5,21 L5,7 Z M6,8 L23,8 L23,15 L6,15 L6,8 Z M9,11 C9.55228475,11 10,10.5522847 10,10 C10,9.44771525 9.55228475,9 9,9 C8.44771525,9 8,9.44771525 8,10 C8,10.5522847 8.44771525,11 9,11 Z M22,14 L10,14 L14.2570991,10.8078101 L15.778026,11.8338712 L19.2346782,8.98370162 L22,11.0150952 L22,14 Z"}))))))),f.default.createElement("div",{className:"article-btn_subimt"},f.default.createElement(i.default,{className:"article-box",placement:"bottom",title:"发布文章",content:f.default.createElement("div",{className:"article-submit_box"},f.default.createElement("ul",{className:"submit-box_tag"},f.default.createElement("span",null,"分类"),l.map(function(t){return f.default.createElement("li",{key:t.id,onClick:function(){e.selectTag(t)},className:t.checkouted?"article":""},t.tag)})),f.default.createElement("div",{className:"submit-submit"},f.default.createElement(a.default,{type:"primary",onClick:this.submit},"确定发布"))),trigger:"click"},"发布")),f.default.createElement("div",{className:"article-btn_user"},f.default.createElement("img",{src:"https://mirror-gold-cdn.xitu.io/168e08e1a5a2e53f643?imageView2/1/w/64/h/64/q/85/interlace/1"})))),f.default.createElement("div",{className:"edit-article-edit"},f.default.createElement("div",{className:"edit-article-textare editor-pane"},f.default.createElement(m.default,{value:n.markdown,onChange:this.onChange})),f.default.createElement("div",{className:"edit-article-markdown result-pane"},f.default.createElement(p.default,{className:"markdown-body",skipHtml:!0,renderers:{code:g.default},source:n.markdown}))))}}]),t}(f.default.Component);t.default=b},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(n(52)),i=b(n(217)),l=b(n(79)),o=b(n(19)),r=b(n(3)),s=b(n(6)),d=b(n(2)),c=b(n(5)),u=b(n(223));n(95),n(81),n(249);var f=n(1),p=b(f),m=n(45),g=n(133),h=b(n(224)),x=b(n(238));function b(e){return e&&e.__esModule?e:{default:e}}n(634),n(239);var v=u.default.TextArea,_=function(e){function t(e){(0,r.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={details:{userName:"xxx",createDate:"2019-10-10",readNumber:0,title:"title",loverArticle:"",markdown:"<div></div>"},goTop:!1,pinglun:"",pinglunList:[]},n.loverArticle=n.loverArticle.bind(n),n.goPinLun=n.goPinLun.bind(n),n.editArticle=n.editArticle.bind(n),n.delArticle=n.delArticle.bind(n),n.scrollPage=n.scrollPage.bind(n),n.onChange=n.onChange.bind(n),n.submitPingLun=n.submitPingLun.bind(n),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"onChange",value:function(e){this.setState({pinglun:e.target.value})}},{key:"submitPingLun",value:function(){var e=this;this.state.pinglun&&5<=this.state.pinglun.length?(0,m.addCommentArticle)({text:this.state.pinglun,articleId:this.state.details.id}).then(function(t){if(t&&t.data&&0===t.data.code){l.default.success("评论成功");var n=e.state.pinglunList;n.unshift(t.data.data),e.setState({pinglunList:n})}}).catch(function(e){l.default.error("评论失败")}):l.default.info("请最少输入5个字符")}},{key:"scrollPage",value:function(){var e=this;window.addEventListener("scroll",(0,g.throttle)(function(){100<=document.documentElement.scrollTop?e.setState({goTop:!0}):e.setState({goTop:!1})},500,800))}},{key:"goPageTop",value:function(){window.scrollTo(0,0)}},{key:"getData",value:function(){var e=this,t=this.props.match.params.id;t&&(0,m.getArticleDetails)({id:t}).then(function(t){if(t&&t.data&&0===t.data.code){var n=t.data.data;e.setState({details:n,pinglunList:[].concat((0,i.default)(n.pinglunList))})}})}},{key:"loverArticle",value:function(){var e=this;(0,m.loveArticle)({id:this.state.details.id}).then(function(t){if(0===t.data.code){var n=e.state.details;n.userLoveStatus=t.data.data.status,n.loveLen=Number(t.data.data.loveLen),e.setState({details:n})}})}},{key:"goPinLun",value:function(){var e=document.querySelector(".article-details_box").getBoundingClientRect().height;window.scrollTo(0,e),this.refs.pinglunRef.focus()}},{key:"editArticle",value:function(e){e.preventDefault(),this.props.history.push({pathname:"/edit-article",query:{id:this.state.details.id}})}},{key:"delArticle",value:function(){console.log(1234),(0,m.delArticle)({id:this.state.details.id}).then(function(e){l.default.success("删除成功")})}},{key:"componentDidMount",value:function(){this.getData(),this.scrollPage()}},{key:"render",value:function(){var e=this.state,t=e.details,n=e.goTop,i=e.pinglun,l=e.pinglunList;return p.default.createElement("div",{className:"article-details_box",ref:"articleDetailsBox"},p.default.createElement("div",{className:"markdown-body_box"},p.default.createElement("div",{className:"article-user_box"},p.default.createElement("div",{className:"user-box_image"},p.default.createElement("img",{src:t.userImage})),p.default.createElement("div",{className:"article-user_text"},p.default.createElement("span",{className:"user-text_title"},t.userName),p.default.createElement("p",{className:"user-text_date"},p.default.createElement("span",null,(0,g.formatDateTime)(t.createDate)),p.default.createElement("span",null,"阅读: ",t.articleReadCountLen||0),t.isEdit&&p.default.createElement("a",{onClick:this.editArticle}," ",p.default.createElement("b",{className:"article-edit_btn",onClick:this.editArticle},"编辑")," "),t.isEdit&&p.default.createElement("a",{onClick:this.editArticle}," ",p.default.createElement("b",{className:"article-edit_btn",onClick:this.delArticle},"删除")," ")))),p.default.createElement("h2",{className:"markdown-body_title"},t.title),p.default.createElement(h.default,{className:"markdown-body",skipHtml:!0,renderers:{code:x.default},source:t.markdown}),p.default.createElement("div",{className:"article-left-tools"},p.default.createElement("div",{className:"left-tools_box",onClick:this.loverArticle},p.default.createElement("span",{className:"left-tools_tip"},t.loveLen),p.default.createElement("i",{className:"iconfont icon-dianzan-copy left-tools_love "+("1"===t.userLoveStatus?"left-tools-love_article":"")})),p.default.createElement("div",{className:"left-tools_box",onClick:this.goPinLun},p.default.createElement("i",{className:"iconfont icon-pinglun left-tool_pinlun"})))),p.default.createElement("div",{className:"article-pinglun_box"},p.default.createElement("ul",{className:"article-pinglun_ul"},p.default.createElement("p",{className:"pinglun-ul_title"},"评论"),p.default.createElement("div",{className:"pinglun-Text"},p.default.createElement(v,{ref:"pinglunRef",value:i,onChange:this.onChange,placeholder:"Controlled autosize",autosize:{minRows:3,maxRows:5}}),p.default.createElement(a.default,{type:"primary",style:{marginTop:"10px"},onClick:this.submitPingLun},"发表")),l.map(function(e){return p.default.createElement("li",{className:"pinglun-ul_item",key:e.createDate},p.default.createElement("div",{className:"pinglun-ul_item_top"},p.default.createElement("div",{className:"pinglun-ul_touxiang"},p.default.createElement("img",{src:e.userImage})),p.default.createElement("span",{className:"pinglun-span pinglun-userName"},e.userName),p.default.createElement("span",{className:"pinglun-span pinglun-created"},(0,g.getArticleDate)(e.createDate))),p.default.createElement("div",{className:"pinglun-text_box"},p.default.createElement("p",null,e.text)))}))),n&&p.default.createElement("div",{className:"article-gotop",onClick:this.goPageTop},p.default.createElement("i",{className:"iconfont icon-fanhuidingbu"})))}}]),t}(f.Component);t.default=_}}]);